<!DOCTYPE html>
<html lang='en'>
    <head>
        <title>
            Ethan Caffrey | Pomidoro Timer
        </title>
        <script>
            window.onload = function(){
                var btn = document.getElementById('btn');
                var number = 0;
                
                var btnHasStopped = false;
                document.getElementById('btnStop').onclick =  function stopTime()
                {
                    document.getElementById('timer').innerHTML = 'Pick a Study Time: ';
                    btnHasStopped = true;
                }

                document.getElementById('btn').onclick = function countdown(){
                    var test = document.getElementById('breakTime');
                    var result = test.options[test.selectedIndex].value;
                    console.log(result);
                    var mins = result;
                    var seconds = 0;
                    setInterval(function(){
                        if(btnHasStopped){
                            console.log('btn is true, stopping timer...')
                            return
                        }
                        else{
                            if(seconds % 60 == 0){
                                mins -= 1;
                                seconds = 60;
                            }
                            if(mins == 0 && seconds == 1){
                                document.getElementById('timeUp').play();
                                document.getElementById('timer').innerHTML = "Time is up! have a break!";
                                return
                            }
                            seconds -= 1;
                            if(seconds < 10)
                            {
                                document.getElementById('timer').innerHTML = mins + ': ' + '0' + seconds;
                            }
                            else
                            {
                            document.getElementById('timer').innerHTML = mins + ': ' + seconds;
                            }
                        } 
                         
                        },1000)
                        return
                    }
                    document.getElementById('btnStop2').onclick =  function stopTime()
                {
                    document.getElementById('timerBreak').innerHTML = 'Pick a Break Time: ';
                    btnHasStopped = true;
                }
                    document.getElementById('btnBreak').onclick = function countdownBreak(){
                    var mins = 15;
                    var seconds = 0;
                    setInterval(function(){
                        if(btnHasStopped){
                            console.log('btn is true, stopping timer...')
                            return
                        }
                        else{
                            if(seconds % 60 == 0){
                                mins -= 1;
                                seconds = 60;
                            }
                            if(mins == 0 && seconds == 1){
                                document.getElementById('timeUpBreak').play();
                                document.getElementById('timerBreak').innerHTML = "Time is up! Get back to work!";
                                return
                            }
                            seconds -= 1;
                            if(seconds < 10)
                            {
                                document.getElementById('timerBreak').innerHTML = mins + ': ' + '0' + seconds;
                            }
                            else
                            {
                            document.getElementById('timerBreak').innerHTML = mins + ': ' + seconds;
                            }
                        }

                        },1000)
                        return
                    }
            }
        </script>

        <style>
            body{background-color:darkslategray;color:white;text-align: center;font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif}
            #timer, #timerBreak{font-size: 15em;}
            .button{color:white;background-color:lightseagreen;border-radius:15px;border: 0px solid black; font-size:7.5em;padding:.1em 1em;}
            select{display:block; margin:1em auto; font-size:5em;}
            /*Desktop Rules*/
            @media only screen and (min-width: 768px){
                #timer, #timerBreak{font-size:3em;}
                select{font-size:2em;}
                .button{font-size:2em}
            }
        </style>
    </head>

    <body>
        <h1>Pomidoro Timer</h1>
        <h2 id='timer'>Pick a Study Time: </h2>
        <select name='breakTime' id='breakTime'>
            <option value='5'>5m</option>
            <option value='10'>10m</option>
            <option value='15'>15m</option>
            <option value='20'>20m</option>
            <option value='25'>25m</option>
            <option value='30'>30m</option>
            <option value='35'>35m</option>
            <option value='40'>40m</option>
            <option value='45' selected>45m</option>
            <option value='50'>50m</option>
            <option value='55'>55m</option>
            <option value='60'>60m</option>
        </select>
        <input type="button" value="Start" id="btn" class='button'\>
        <input type="button" value='Stop' id='btnStop' class='button'\>
        <audio id='timeUp' src='assets/podcastEpisodes/timerSound.mp3'></audio>
        <h2 id='timerBreak'>Pick a Break Time:</h2>

        <select name='breakTime' id='breakTime'>
            <option value='5'>5m</option>
            <option value='10'>10m</option>
            <option value='15' selected>15m</option>
            <option value='20'>20m</option>
        </select>
        <input type="button" value="Start" id="btnBreak" class='button'\>
        <input type="button" value='Stop' id='btnStop2' class='button'\>
        <audio id='timeUpBreak' src='assets/podcastEpisodes/timerSound.mp3'></audio>


    </body>
</html>